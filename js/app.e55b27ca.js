(function(t){function e(e){for(var i,r,s=e[0],c=e[1],h=e[2],g=0,l=[];g<s.length;g++)r=s[g],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(l.length)l.shift()();return o.push.apply(o,h||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/AotR/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0316":function(t,e,n){t.exports=n.p+"img/main_page_bg.38de1c7b.jpg"},"034f":function(t,e,n){"use strict";n("85ec")},2154:function(t,e,n){"use strict";n("ed34")},2463:function(t,e,n){"use strict";n("9d60")},"256e":function(t,e,n){},"3d7c":function(t,e,n){t.exports=n.p+"img/btn_left_hand.da9e9522.png"},"44aa":function(t,e,n){t.exports=n.p+"img/img_answer_text_01.0a477c9e.png"},"4d96":function(t,e,n){"use strict";n("a5a1")},5226:function(t,e,n){t.exports=n.p+"img/img_share_result_diamond.1a4d6840.jpg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showBlock,expression:"showBlock"}],attrs:{id:"block-view"}},[n("h1",[t._v("使用手機並翻轉成直式來體驗遊戲呦～")])])],1)},o=[],r=n("9fee"),s={metaInfo:{meta:[{property:"og:image",content:"https://"+window.location.hostname+r},{property:"og:description",content:"尋找真愛"},{property:"og:title",content:"戒指流浪記"},{property:"og:url",content:"https://".concat(window.location.hostname,"/AotR/")},{property:"og:site_name",content:"戒指流浪記遊戲體驗"},{property:"og:type",content:"website"},{property:"og:image:width",content:"2000"},{property:"og:image:height",content:"1047"}]},data:function(){return{showBlock:!1}},mounted:function(){var t=this,e=window.innerWidth/window.innerHeight;this.showBlock=e>.7,window.onresize=function(){t.detectSizeChange()}},methods:{detectSizeChange:function(){var t=window.innerWidth/window.innerHeight;this.showBlock=t>.7}}},c=s,h=(n("034f"),n("2877")),d=Object(h["a"])(c,a,o,!1,null,null,null),g=d.exports,l=n("8c4f"),u=n("58ca"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("div",{staticClass:"imgbox"},[i("img",{staticClass:"center-fit",attrs:{id:"main-background",src:n("0316"),alt:""}}),i("div",{staticClass:"centered",attrs:{id:"main_view_container"}},[i("img",{attrs:{id:"main_view_image",src:n("9dff"),alt:""}}),i("router-link",{attrs:{to:"/camera-shot",id:"start_btn"}},[i("button",{staticClass:"red-btn-style"},[t._v("尋找真愛")])])],1)])])},p=[],f=[n("3d7c"),n("7615"),n("ca7a"),n("9dde"),n("aff4"),n("ec82"),n("6ca1"),n("d9e3"),n("93ff"),n("aec8"),n("44aa"),n("c151"),n("ea10"),n("7fb8"),n("7cbd"),n("a567"),n("8033"),n("5226"),n("8cf8"),n("6372")],v={name:"Home",components:{},mounted:function(){this.preloadImages()},methods:{preloadImages:function(){var t=f;console.log(t);for(var e=0;e<t.length;e++){var n=new Image;n.src=t[e]}}}},b=v,w=(n("4d96"),n("2154"),Object(h["a"])(b,m,p,!1,null,"12f0d53c",null)),_=w.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"base-container"}},[n("video",{ref:"video",attrs:{id:"video-view",autoplay:"true",playsinline:""}}),n("canvas",{ref:"canvas",attrs:{id:"video-canvas"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==t.status,expression:"status == 1"}],attrs:{id:"img-hand",src:t.handShapeImageUrl,alt:""}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"img-answer-text",src:t.selectedSloganImg,alt:""}}),t._m(0),n("button",{staticClass:"red-btn-style",attrs:{id:"btn-confirm"},on:{click:t.onConfirmBtn}},[t._v(t._s(t.confirmText))]),n("button",{attrs:{id:"btn-hand-side"},on:{click:t.changeHandSide}},[n("img",{attrs:{src:t.handImageBtnUrl,alt:""}})])])},x=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"photo-container"}},[i("img",{attrs:{id:"hbo-logo",src:n("e9ac"),alt:""}}),i("img",{attrs:{id:"program-logo",src:n("cf05"),alt:""}})])}],R=(n("99af"),n("729e")),S=n.n(R),y={name:"Camera",data:function(){return{status:1,isLeftHanded:!0,handImageBtnUrl:C,handShapeImageUrl:E,sloganImgs:[O,L,M,A],lhRingImgs:[T,$,H],rhRingImgs:[D,j,P],selectedRingId:0,selectedSloganId:0,isResultShown:!1,countdownTime:50,cameraPhoto:S.a,videoEl:Element,canvasEl:Element,ringEl:Element,context:CanvasRenderingContext2D,photoDataUri:""}},mounted:function(){var t=this;this.videoEl=this.$refs.video,this.ringEl=this.$refs.ring,this.canvasEl=this.$refs.canvas,this.canvasEl.width=this.screenMinLength,this.canvasEl.height=this.screenMaxLength,this.context=this.canvasEl.getContext("2d"),this.videoEl.control=!1,console.log("max length: "+this.screenMaxLength),console.log("min length: "+this.screenMinLength),this.cameraPhoto=new S.a(this.videoEl),this.cameraPhoto.startCamera(R["FACING_MODES"].ENVIRONMENT,{width:640,height:480}).then((function(e){console.log(e),console.log("video: "+t.videoEl.videoWidth+", "+t.videoEl.videoHeight),t.timerCallBack()})).catch(this.timerCallBack())},computed:{selectedRingImg:function(){return this.isLeftHanded?this.lhRingImgs[this.selectedRingId]:this.rhRingImgs[this.selectedRingId]},selectedSloganImg:function(){return this.sloganImgs[this.selectedSloganId]},confirmText:function(){return 1==this.status?"開始":2==this.status?"選取中":3==this.status?"拍照":"N/A"},isPortrait:function(){return 0==window.orientation},cameraSettings:function(){return this.cameraPhoto.getCameraSettings()},ringImage:function(){var t=new Image;return t.src=this.selectedRingImg,t},sloganImage:function(){var t=new Image;return t.src=this.selectedSloganImg,t}},methods:{getScreenWidth:function(){return window.innerWidth},getScreenHeight:function(){return window.innerHeight},changeHandSide:function(){this.isLeftHanded=!this.isLeftHanded,this.handImageBtnUrl=this.isLeftHanded?C:k,this.handShapeImageUrl=this.isLeftHanded?E:U;var t=this;this.ringImage.onload=function(){t.computeFrame()}},getRandomRingId:function(){var t=0;do{t=Math.floor(10*Math.random())}while(t>=this.rhRingImgs.length||t==this.selectedRingId);return t},getRandomSloganId:function(){var t=0;do{t=Math.floor(10*Math.random())}while(t>=this.sloganImgs.length||t==this.selectedSloganId);return t},onConfirmBtn:function(){1==this.status?(this.startCountdown(),this.status=2):3==this.status&&(this.getCameraPhoto(),""!=this.photoDataUri?this.$router.push({name:"Result",params:{result_id:this.selectedRingId,photoDataUri:this.photoDataUri}}):this.$router.push({path:"/result-view/result_".concat(this.selectedRingId,"/slogan_").concat(this.selectedSloganId)}))},startCountdown:function(){var t=this,e=setInterval((function(){t.countdownTime<=0?(clearInterval(e),t.status=3,t.countdownTime=100,t.computeFrame()):t.countdownTime<30?(t.countdownTime-=1,t.countdownTime%2==0&&(t.selectedRingId=t.getRandomRingId(),t.selectedSloganId=t.getRandomSloganId(),t.computeFrame())):t.countdownTime<20?(t.countdownTime-=1,t.countdownTime%3==0&&(t.selectedRingId=t.getRandomRingId(),t.selectedSloganId=t.getRandomSloganId(),t.computeFrame())):t.countdownTime<10?(t.countdownTime-=1,t.countdownTime%4==0&&(t.selectedRingId=t.getRandomRingId(),t.selectedSloganId=t.getRandomSloganId(),t.computeFrame())):(t.selectedRingId=t.getRandomRingId(),t.selectedSloganId=t.getRandomSloganId(),t.computeFrame(),t.countdownTime-=1)}),100)},getHtmlImage:function(){},getCameraPhoto:function(){var t=this.canvasEl.toDataURL();this.photoDataUri=t,this.status=3},imageToDataUri:function(t,e,n){var i=document.createElement("canvas"),a=i.getContext("2d");return i.width=e,i.height=n,a.drawImage(t,0,0,e,n),i.toDataURL()},timerCallBack:function(){this.computeFrame();var t=this;setTimeout((function(){t.timerCallBack()}),1e3/30)},computeFrame:function(){this.canvasEl.width=this.getScreenWidth(),this.canvasEl.height=this.getScreenHeight();var t=.75,e=this.getScreenWidth(),n=this.getScreenHeight(),i=n*t;if(this.context.drawImage(this.videoEl,0,0,480,640,0,0,i,this.getScreenHeight()),1!=this.status){var a=.19*e,o=a/this.ringImage.width,r=.28,s=this.isLeftHanded?e*r:e*(1-r)-a,c=n/2-n/2*.4;this.context.drawImage(this.ringImage,0,0,this.ringImage.width,this.ringImage.height,s,c,a,this.ringImage.height*o);var h=this.getScreenWidth(),d=h/this.sloganImage.width,g=0,l=(this.getScreenHeight()-this.sloganImage.height*d)/2-100;this.context.drawImage(this.sloganImage,0,0,this.sloganImage.width,this.sloganImage.height,g,l,h,this.sloganImage.height*d)}}}},C=n("3d7c"),k=n("7615"),E=n("ca7a"),U=n("9dde"),T=n("aff4"),D=n("ec82"),$=n("6ca1"),j=n("d9e3"),H=n("93ff"),P=n("aec8"),O=n("44aa"),L=n("c151"),M=n("ea10"),A=n("7fb8"),B=y,W=(n("2463"),Object(h["a"])(B,I,x,!1,null,"9809458a",null)),F=W.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"base-container"}},[n("img",{ref:"resultImage",attrs:{id:"result-img-bg",src:t.selectedResult,alt:""}}),n("div",{attrs:{id:"result-text-container"}},[n("p",{style:{width:.7*t.contentWidth+"px"},domProps:{innerHTML:t._s(t.detailTexts[this.selectedRingId])}})]),n("button",{staticClass:"red-btn-style",attrs:{id:"next-btn"},on:{click:t.onConfirmAction}},[t._v(t._s(t.confirmText))])])},z=[],G=(n("a9e3"),{name:"result-view",props:{resultNumber:Number},mounted:function(){var t=this.$route.params.result_id;this.selectedResult=this.resultImgs[t],this.photoDataUri=this.$route.params.photoDataUri;var e=this,n=new ResizeObserver((function(t){var n=t[0].contentRect,i=n.width;e.contentWidth=i}));n.observe(this.$refs.resultImage)},data:function(){return{resultImgs:[V,J,q],answerTextImgs:[Q,K,X,Y],selectedRingId:this.$route.params.result_id,selectedSloganId:this.$route.params.slogan_id,selectedResult:"",detailTexts:Z,photoDataUri:"",contentWidth:50}},computed:{confirmText:function(){return null==this.photoDataUri||""==this.photoDataUri?"馬上試玩":"下一步"}},methods:{onConfirmAction:function(){null==this.photoDataUri||""==this.photoDataUri?this.$router.push({name:"Home"}):this.$router.push({name:"Share",params:{selectedRingId:this.selectedRingId,photoDataUri:this.photoDataUri,selectedSloganId:this.selectedSloganId}})}}}),V=n("7cbd"),J=n("a567"),q=n("8033"),Q=n("44aa"),K=n("c151"),X=n("ea10"),Y=n("7fb8"),Z=["非常喜歡數字，<br>有超強的記憶力和演算能力，<br>喜歡秩序和整齊到甚至有點強迫症的程度。<br>不善人際關係，為人耿直，<br>是虔敬與誠實的象徵。<br>生活充滿井然有序的規律性，<br>直到他的公式化世界出現變數——<br>遇見熱情美麗的空服員麗莎，<br>有如上帝把天灰撥開一道曙光……。]<br>鑽石代表著慈愛、誠實、德望，深藍、清澈是貞節之愛的保證。","善良熱情美麗大方的麗莎<br>從小在爸爸肩頭上造飛機，<br>夢想飛上天空。<br>如願進入航空業成為空服員，<br>看到乘客臉上的笑容就是她的快樂來源，<br>享受飛往世界各地冒險闖蕩。<br>不按牌理出牌的麗莎，<br>只有對浪漫求婚的憧憬無法妥協，<br>卻愛上了一板一眼的奕之……。<br>紅酒般璀璨奪目的紅寶石，<br>也被稱為「愛情之石」，<br>象徵能為人帶來幸福。","迷人有魅力的Rossy<br>，身為知名兩性作家，<br>時常在廣播節目上暢談婚姻<br>、愛情相處之道。<br>與餐廳老闆思敬擁有一段令人欣羨的<br>幸福婚姻生活。<br>她的聲音彷彿是這座城市的心靈雞湯，<br>卻對自己與丈夫日益惡化的關係無能為力，<br>愛情即將在日常瑣事中逐漸被消磨殆盡了嗎？<br>紫水晶是社交之石，<br>也代表著「愛的守護石」<br>，主宰直覺與潛意識，<br>有助於開發智慧與潛能。"],tt=G,et=(n("e502"),Object(h["a"])(tt,N,z,!1,null,"835caeba",null)),nt=et.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"base-container"}},[n("img",{ref:"backgroundImage",attrs:{id:"background-image",src:t.backgroundImage,alt:""}}),n("div",{attrs:{id:"photo-container"}},[n("img",{style:{width:t.contentWidth+"px"},attrs:{id:"result-photo",src:t.photoDataUri,alt:""}})]),n("div",{attrs:{id:"buttons-group"}},[n("button",{staticClass:"red-btn-style",staticStyle:{"margin-right":"10px"},on:{click:t.onPlayAgain}},[t._v("再玩一次")]),t._v(" "),n("button",{staticClass:"red-btn-style",staticStyle:{"margin-left":"10px","margin-bottom":"10px"},on:{click:t.onShareResult}},[t._v("分享結果")]),n("br"),n("button",{staticClass:"red-btn-style",staticStyle:{"margin-right":"10px"},on:{click:t.onSavePhoto}},[t._v("儲存照片")]),t._v(" "),n("button",{staticClass:"red-btn-style",staticStyle:{"margin-left":"10px"},on:{click:t.onGoPreview}},[t._v("觀看預告")])])])},at=[],ot=(n("ac1f"),n("5319"),{data:function(){return{resultImgs:[rt,st,ct],resultId:this.$route.params.selectedRingId,photoDataUri:this.$route.params.photoDataUri,photoImage:Image,contentWidth:100}},computed:{backgroundImage:function(){return this.resultImgs[this.resultId]}},mounted:function(){null!=this.photoDataUri&&""!=this.photoDataUri||this.$router.push({name:"Home"});var t=new Image;t.src=this.photoDataUri,this.photoImage=t;var e=this,n=new ResizeObserver((function(t){var n=t[0].contentRect,i=n.width;e.contentWidth=i}));n.observe(this.$refs.backgroundImage)},methods:{onPlayAgain:function(){this.$router.push({name:"CameraShot"})},onShareResult:function(){var t=window.location.hostname,e="https://".concat(t,"/AotR/%23/result-view/result_").concat(this.resultId,"/slogan_0"),n=this.getShareLink(e,"".concat(t).concat(rt),"戒指流浪記");window.open(n)},onSavePhoto:function(){var t=this.createSreenshotPhoto(),e=document.createElement("A");e.setAttribute("download","AR.png");var n=t.replace(/^data:image\/[^;]/,"data:application/octet-stream");e.setAttribute("href",n),e.click()},onGoPreview:function(){var t="https://www.youtube.com/watch?v=dElRVQFqj-k&ab_channel=BrunoMars";window.open(t,"_blank")},getShareLink:function(t,e,n){var i="https://www.facebook.com/sharer/sharer.php?u=".concat(t,"%2F&picture=").concat(e,"&hashtag=%23").concat(encodeURIComponent(n),', "_blank", "toolbar=0,status=0');return i},createSreenshotPhoto:function(){var t=document.createElement("CANVAS");t.width=800,t.height=1731;var e=t.getContext("2d"),n=this.$refs.backgroundImage;e.drawImage(n,0,0,1284,2778,0,0,800,1731);var i=this.photoImage;return e.drawImage(i,0,10,i.width,.65*i.height,0,160,800,950),t.toDataURL()}}}),rt=n("5226"),st=n("8cf8"),ct=n("6372"),ht=ot,dt=(n("b941"),Object(h["a"])(ht,it,at,!1,null,"df49554a",null)),gt=dt.exports;i["a"].use(l["a"]),i["a"].use(u["a"]);var lt=[{path:"/",name:"Home",component:_},{path:"/camera-shot",name:"CameraShot",component:F},{path:"/result-view/result_:result_id/slogan_:slogan_id",name:"Result",component:nt},{path:"/share-view",name:"Share",component:gt}],ut=new l["a"]({routes:lt,mode:"hash",base:"/"}),mt=ut;i["a"].config.productionTip=!1,new i["a"]({router:mt,render:function(t){return t(g)}}).$mount("#app")},6372:function(t,e,n){t.exports=n.p+"img/img_share_result_amtheyst.9616f51f.jpg"},6859:function(t,e,n){},"6ca1":function(t,e,n){t.exports=n.p+"img/img_lh_ruby_s.0e568814.png"},7615:function(t,e,n){t.exports=n.p+"img/btn_right_hand.ab1af4ec.png"},"7cbd":function(t,e,n){t.exports=n.p+"img/img_result_diamond.199890d2.jpg"},"7fb8":function(t,e,n){t.exports=n.p+"img/img_answer_text_04.0354b892.png"},8033:function(t,e,n){t.exports=n.p+"img/img_result_amethyst.5a79a7da.jpg"},"85ec":function(t,e,n){},"8cf8":function(t,e,n){t.exports=n.p+"img/img_share_result_ruby.cb6b8436.jpg"},"93ff":function(t,e,n){t.exports=n.p+"img/img_lh_amethyst_s.c224e891.png"},"9d60":function(t,e,n){},"9dde":function(t,e,n){t.exports=n.p+"img/img_right_hand.616ee745.png"},"9dff":function(t,e,n){t.exports=n.p+"img/main_page_view.0c058046.jpg"},"9fee":function(t,e,n){t.exports=n.p+"img/fb_sharing_preview.f0b6ca5e.jpg"},a567:function(t,e,n){t.exports=n.p+"img/img_result_ruby.ace97448.jpg"},a5a1:function(t,e,n){},aec8:function(t,e,n){t.exports=n.p+"img/img_rh_amethyst_s.e3a6fa89.png"},aff4:function(t,e,n){t.exports=n.p+"img/img_lh_diamond_s.8eb1fcf4.png"},b941:function(t,e,n){"use strict";n("6859")},c151:function(t,e,n){t.exports=n.p+"img/img_answer_text_02.ea68494a.png"},ca7a:function(t,e,n){t.exports=n.p+"img/img_left_hand.97e81afb.png"},cf05:function(t,e,n){t.exports=n.p+"img/logo.a40a776b.png"},d9e3:function(t,e,n){t.exports=n.p+"img/img_rh_ruby_s.66446c67.png"},e502:function(t,e,n){"use strict";n("256e")},e9ac:function(t,e,n){t.exports=n.p+"img/logo_hbo.6d59477a.png"},ea10:function(t,e,n){t.exports=n.p+"img/img_answer_text_03.e9f50ab1.png"},ec82:function(t,e,n){t.exports=n.p+"img/img_rh_diamond_s.f413e34c.png"},ed34:function(t,e,n){}});
//# sourceMappingURL=app.e55b27ca.js.map